<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Opgave10</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="Style/common.css">
    <style>
        #board {
            box-sizing: content-box;
            position: static;
            width: 500px;
            height: 300px;
            padding: 5px;
            border: 5px solid rgb(128, 0, 53);
            background-color: rgb(238, 255, 0);
        }
    </style>
</head>

<body onkeydown='getKeyAndMove(event)'>
    <div id="wrapper">

        <h1 id="overskrift">Opgave 10: Flyt image</h1>


        <div id="board">
            <img src="./img/pacman.png" alt="pacman" id="pacman" />
        </div>

        <div id="control">
            <img id="venstre" src="./img/venstre.png" alt="Venstre" onclick="moveLeft()" />
            <img id="op" src="./img/op.png" alt="Op" onclick="moveUp()" />
            <img id="ned" src="./img/ned.png" alt="Ned" onclick="moveDown()" />
            <img id="hoejre" src="./img/hoejre.png" alt="Højre" onclick="moveRight()" />
            <img id="stop" src="Img/stop.png" alt="stop" onclick="stopPM()">
        </div>


        <div id="opgaven">

            <h4>Opgaven</h4>

            <ol>
                <li>Når man klikker på en af image-pilene:</li>
                <li>Skal pacman flyttes 10 pixels i den retning som pilen peger</li>
            </ol>

            <ol>
                <li>Når man klikker på en tastatur-pil</li>
                <li>Skal pacman flyttes 10 pixels i den retning som pilen peger</li>
            </ol>

            <!--<p class="i">Kan du mon udvide  at gøre sådan at pacman'en fortsætter med at flytte sig i den samme retning - indtil man klikker på en anden pil (eller den rammer browservinduets "ramme")</p>-->

            <p id="help">
                Få hjælp fx her:
                <a href="http://www.w3schools.com/jsref/prop_style_top.asp" target="_blank">Noget om style</a> og <a
                    href="http://stackoverflow.com/questions/905222/enter-key-press-event-in-javascript#answers"
                    target="_blank">"Enter key press event in JavaScript"</a> og <a href="http://keycode.info/"
                    target="_blank">koderne til pile-tasterne </a>
            </p>

        </div>

    </div>


    <script window.onload>




        var objImage = null;
        function init() {
            objImage = document.getElementById("pacman");
            objImage.style.position = 'absolute';
            objImage.style.left = '600px';
            objImage.style.top = '250px';
        }
        function getKeyAndMove(e) {
            var key_code = e.which || e.keyCode;
            switch (key_code) {
                case 37: //left arrow key
                e.preventDefault();
                    moveLeft();
                    break;
                case 38: //Up arrow key
                    e.preventDefault(); /* undgå default scroll på tast */
                    moveUp();
                    break;
                case 39: //right arrow key
                e.preventDefault();
                    moveRight();
                    break;
                case 40: //down arrow key
                    e.preventDefault();
                    moveDown();
                    break;
            }
        }

        let t;

        function moveLeft() {
            clearTimeout(t); /*Stopper timeout */
            if (parseInt(objImage.style.left) > 365) {
                objImage.style.left = parseInt(objImage.style.left) - 5 + 'px';
                t = setTimeout(moveLeft, 50);
            }
        }
        function moveUp() {
            clearTimeout(t);
            if (parseInt(objImage.style.top) > 130) {
                objImage.style.top = parseInt(objImage.style.top) - 5 + 'px';
                t = setTimeout(moveUp, 50);

            }
        }

        function moveRight() {
            clearTimeout(t);
            if (parseInt(objImage.style.left) < 810) {
                objImage.style.left = parseInt(objImage.style.left) + 5 + 'px';
                t = setTimeout(moveRight, 50);
            }

        }
        function moveDown() {
            clearTimeout(t);
            if (parseInt(objImage.style.top) < 375) {
                objImage.style.top = parseInt(objImage.style.top) + 5 + 'px';
                t = setTimeout(moveDown, 50);
            }
        }
        function stopPM(){
            clearTimeout(t);
        }
        window.onload = init;






    </script>


</body>

</html>